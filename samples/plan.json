{
  "chains":[{
    "id":"ACTUALIZACION_STOCK_MAGMI",
    "name":"Actualizacion de stock via Magmi",
    "start_date":"2016-08-01T00:00:00",
    "end_date":"2099-11-01T00:00:00",
    "schedule_interval":"*/1 * * * *",
    "depends_chains":[],
    "events":{"on_start":{},"on_end":{}, "on_waiting_dependencies":{}, "on_exceeded_limited_time_end":{}},
    "processes":[{
      "id":"CONCAT_MAGMI_CSVS",
      "name":"Concatenador de CSVs",
      "depends_process":[],
      "command":"/var/batch/CSVCONCAT.sh",
      "args":[],
      "retries":0,
      "retry_delay":0,
      "limited_time_end":"",
      "end_chain_on_fail":true,
      "output":{"file_name":"/var/log/runnerty/:CHAIN_ID_:PROCESS_ID_:DD:MM:YY_:HH:mm:ss.log", "write":[":PROCESS_EXECUTE_ERR_RETURN",":PROCESS_EXECUTE_RETURN"], "concat":false},
      "events":{
        "on_start":{
          "notifications":[
            {
              "type":"slack",
              "id":"slack_default",
              "bot_emoji": ":rabbit2:",
              "channel": "mlm",
              "message":"INICIO DEL PROCESO *:PROCESS_ID* DE LA CADENA :CHAIN_ID"
            }
          ]
        },
        "on_fail":{
          "notifications":[
            {
              "type":"slack",
              "id":"slack_default",
              "bot_emoji": ":see_no_evil:",
              "channel": "mlm",
              "message":"ERROR EN EL PROCESO *:PROCESS_ID* DE LA CADENA :CHAIN_ID - :PROCESS_EXECUTE_ERR_RETURN / :PROCESS_EXECUTE_RETURN"
            }
          ]
        },
        "on_retry":{},
        "on_end":{},
        "on_waiting_dependencies":{},
        "on_exceeded_limited_time_end":{}
      }
    },{
      "id":"MAGMI_REFRESH_STOCK",
      "name":"Refresco de Stock via Magmi",
      "depends_process":[{"id":"CONCAT_MAGMI_CSVS"}],
      "command":"php",
      "args":["/mnt/efskyeroo/www/kyeroo.com/magmi/cli/magmi.cli.php", "-profile=kyeroo_stock", "-mode=update", "-CSV:filename=/mnt/efskyeroo/www/kyeroo.com/var/import/final.csv"],
      "retries":0,
      "retry_delay":0,
      "limited_time_end":"",
      "events":{
        "on_start":{
          "notifications":[
            {
              "type":"slack",
              "id":"slack_default",
              "bot_emoji": ":rabbit2:",
              "channel": "mlm",
              "message":"INICIO DEL PROCESO *:PROCESS_ID* DE LA CADENA :CHAIN_ID"
            }
          ]
        },
        "on_fail":{
          "notifications":[
            {
              "type":"slack",
              "id":"slack_default",
              "bot_emoji": ":see_no_evil:",
              "channel": "mlm",
              "message":"ERROR EN EL PROCESO *:PROCESS_ID* DE LA CADENA :CHAIN_ID - :PROCESS_EXECUTE_ERR_RETURN / :PROCESS_EXECUTE_RETURN"
            }
          ]
        },
        "on_retry":{},
        "on_end":{
          "notifications":[
            {
              "type":"slack",
              "id":"slack_default",
              "bot_emoji": ":v:",
              "channel": "mlm",
              "message":"FIN DEL PROCESO *:PROCESS_ID* DE LA CADENA :CHAIN_ID - :PROCESS_EXECUTE_RETURN"
            },
            {
              "type":"mail",
              "id":"mail_default",
              "bot_emoji": ":v:",
              "channel": "mlm",
              "message":"FIN DEL PROCESO *:PROCESS_ID* DE LA CADENA :CHAIN_ID - :PROCESS_EXECUTE_RETURN"
            }
          ]
        },
        "on_waiting_dependencies":{},
        "on_exceeded_limited_time_end":{}
      }
    },
    {
      "id":"BACKUP_REMOVE_CSV_LOADED",
      "name":"Backup de cargas y eliminacion",
      "depends_process":[{"id":"MAGMI_REFRESH_STOCK"}],
      "command":"/var/batch/RMCSVMAGMILOAD.sh",
      "args":[],
      "retries":0,
      "retry_delay":0,
      "limited_time_end":"",
      "events":{
        "on_start":{
          "notifications":[
            {
              "type":"slack",
              "id":"slack_default",
              "bot_emoji": ":rabbit2:",
              "channel": "mlm",
              "message":"INICIO DEL PROCESO *:PROCESS_ID* DE LA CADENA :CHAIN_ID - FICHERO: :PROCESS_LAST_DEPEND_FILE_READY"
            }
          ]
        },
        "on_fail":{
          "notifications":[
            {
              "type":"slack",
              "id":"slack_default",
              "bot_emoji": ":see_no_evil:",
              "channel": "mlm",
              "message":"ERROR EN EL PROCESO *:PROCESS_ID* DE LA CADENA :CHAIN_ID - :PROCESS_EXECUTE_ERR_RETURN / :PROCESS_EXECUTE_RETURN"
            }
          ]
        },
        "on_retry":{},
        "on_end":{
          "notifications":[
            {
              "type":"slack",
              "id":"slack_default",
              "bot_emoji": ":v:",
              "channel": "mlm",
              "message":"FIN DEL PROCESO *:PROCESS_ID* DE LA CADENA :CHAIN_ID - :PROCESS_EXECUTE_RETURN"
            }
          ]
        },
        "on_waiting_dependencies":{},
        "on_exceeded_limited_time_end":{}
      }
    }
    ]
  }
  ]
}